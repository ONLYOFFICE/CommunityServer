<%@ 
    Page
    Title=""
    Language="C#"
    MasterPageFile="~/Views/Shared/Site.Master"
    Inherits="System.Web.Mvc.ViewPage"
    ContentType="text/html"
%>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
	Partner Detailed Information
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <h1>
        <%= Html.ActionLink(" ", "index", new {id = "partners"}, new {@class = "up"}) %>
        <span class="hdr">GET /api/partnerapi/getcurrentpartner</span>
        <span class="auth">This function requires authentication</span>
    </h1>
    
    <div class="header-gray">Description</div>
    <p class="dscr">Partner information method is used to get the specific information (generated key amount, paid invoices number, etc.) together with the <%= Html.ActionLink("general information", "getpartner") %> about the partner.</p>

    <div class="header-gray">Parameters</div>
    <p>This method has not got any parameters.</p>
    
    <div class="header-gray">Example</div>
    <pre>
      [TestClass]
        public class ApiTests
        {
            private readonly string apiHost = "https://partners.onlyoffice.com";

            [TestMethod]
            public void GetCurrentPartnerTest()
            {
                using (var client = new WebClient())
                {
                    var url = string.Format("/api/partnerapi/GetCurrentPartner");
                    client.Headers.Add("Authorization", "ASC2 59ce3f5b-3e33-4539-87d9-c273bc656135:20131217091618:nn00000anUEKUkZGG0OfeK9gwwE1");
                    result = client.DownloadString(apiHost + url);
                    Assert.IsNotNull(result);
                }
            }
    </pre>
    
    <div class="header-gray">
        Returns
        <span id="clipLink">Get link to this headline</span>
        <a id="returns"></a>
    </div>
    <p>The response will contain the following information about the partner</p>

    <div class="header-gray">Example Response</div>
	<table class="table">
        <colgroup>
            <col style="width: 20%"/>
            <col/>
            <col style="width: 110px"/>
            <col style="width: 20%"/>
        </colgroup>
        <thead>
            <tr class="tablerow">
                <td>Name</td>
                <td>Description</td>
                <td>Type</td>
                <td>Example</td>
            </tr>
        </thead>
        <tbody>
		    <tr class="tablerow">
                <td>generatedAmount</td>
                <td>Total sum that all the keys generated by the partner cost</td>
                <td>decimal number</td>
                <td>175.00</td>
            </tr>
		    <tr class="tablerow">
			    <td>debtor</td>
			    <td>Whether the partner is debtor or not (in case of <b>true</b> the <em>debt</em> parameter will have positive numeric value)</td>
			    <td>boolean</td>
			    <td>false</td>
		    </tr>
		    <tr class="tablerow">
			    <td>activated</td>
			    <td>Total number of activated keys generated by the partner</td>
			    <td>number</td>
			    <td>5</td>
		    </tr>
		    <tr class="tablerow">
			    <td>generated</td>
			    <td>Total number of keys generated by the partner</td>
			    <td>number</td>
			    <td>6</td>
		    </tr>
		    <tr class="tablerow">
			    <td>clients</td>
			    <td>Total number of clients the partner has</td>
			    <td>number</td>
			    <td>25</td>
		    </tr>
		    <tr class="tablerow">
			    <td>activeClients</td>
			    <td>Number of active clients from the <em>clients</em> parameter</td>
			    <td>number</td>
			    <td>11</td>
		    </tr>
		    <tr class="tablerow">
			    <td>lastPayment</td>
			    <td>Date and time of the latest payment made by the partner</td>
			    <td>date and time</td>
			    <td>"2014-05-22T12:38:42"</td>
		    </tr>
		    <tr class="tablerow">
			    <td>debt</td>
			    <td>Partner debt value</td>
			    <td>decimal number</td>
			    <td>0.0</td>
		    </tr>
		    <tr class="tablerow">
			    <td>paid</td>
			    <td>Total payment amount made by the partner</td>
			    <td>decimal number</td>
			    <td>568.000000000</td>
		    </tr>
		    <tr class="tablerow">
			    <td>lastPaymentAmount</td>
			    <td>Latest payment amount made by the partner</td>
			    <td>decimal number</td>
			    <td>568.000000000</td>
		    </tr>
		    <tr class="tablerow">
			    <td>invoicesNotPaid</td>
			    <td>Number of invoices not paid by the partner</td>
			    <td>decimal number</td>
			    <td>3.0</td>
		    </tr>
	    </tbody>
    </table>
    <pre>
    {"generatedAmount":175.00, "debtor":false, "activated":5, "generated":6, "clients":25, "activeClients":11, "lastPayment":"2014-05-22T12:38:42", "debt":0.0, "paid":568.000000000, "lastPaymentAmount":568.000000000, "invoicesNotPayed":3.0, "id":"00000000-c2fb-4de6-a8ae-e59a834a3cc7", "domain":"myportal", "email":"email@gmail.com", "firstName":"John", "lastName":"Smith", "url":"onlyoffice.com", "phone":"+1 (555) 555 2379", "language":"en-US", "companyName":"My Company", "country":"United States (United States)", "countryCode":"US", "countryHasVat":false, "address":"Lubanas st. 125a-25, Riga, Latvia, EU, LV-1021", "vatId":"LV40125269408", "creationDate":"2013-07-08T14:03:21", "status":1, "comment":"Here is the comment", "portal":"myportal.onlyoffice.com", "portalConfirmed":false, "isAdmin":false, "limit":1500.00, "discount":50, "payPalAccount":"email@gmail.com", "payPalAccess":true, "deposit":1500.00, "removed":false, "currency":"US", "logoUrl":"/partners/Data/partners/logo/00000000-c2fb-4de6-a8ae-e59a834a3cc7/logo.jpg", "displayName":"This is John Smith Company", "displayType":0, "supportPhone":"+1 (555) 555 2380", "supportEmail":"support@onlyoffice.com", "salesEmail":"sales@onlyoffice.com", "termsUrl":"https://partners.onlyoffice.com/terms", "theme":"wild-pink", "ruAccount":"64664643906846741582", "ruBank":"Bank of Russia", "ruKs":"30101810600000000957", "ruKpp":"345452345", "ruBik":"049923790", "ruInn":"345452345675", "partnerType":0, "paymentMethod":2, "paymentUrl":"paymenturl.com", "adminId":"11111111-c2fb-4de6-a8ae-e59a834a3cc7", "activationDate":"2014-01-01T14:45:34", "availableCredit":1325.0, "timeZone":"(UTC+01:00) Europe/Berlin", "contractNumber":"#345643", "taxNumber":"34545234567562", "taxFileUrl":"/partners/Data/partners/tax/00000000-c2fb-4de6-a8ae-e59a834a3cc7/taxfile.txt", "helpTourStatus":-1, "customEmailSignature":true}
    </pre>
		
    <div class="note">Please note that some of the response information will not be displayed (the response will be "null") to ease the load on the server. Use the <a  href="<%= Url.Action("getpartner") %>" class="underline">Partner Information</a> request to retrieve this information.</div>
</asp:Content>

<asp:Content ID="Content3" runat="server" ContentPlaceHolderID="ScriptPlaceholder"></asp:Content>